# Deconwolf Deconvolution

**Type:** Annotation Worker  
**Interface Category:** Image Processing  
**GPU Support:** Yes (NVIDIA CUDA)  

## Description

Deconvolves images using Richardson-Lucy algorithm with Born-Wolf PSF model (GPU-accelerated)

## Interface Parameters

| Parameter | Type | Required | Default | Range / Options | Description |
|-----------|------|:--------:|---------|-----------------|-------------|
| **Channels to deconvolve** | `channelCheckboxes` |  | -- | -- | Select channels to deconvolve. Unselected channels pass through unchanged. |
| **Auto-extract from ND2** | `checkbox` |  | False | -- | Try to extract optical parameters from ND2 metadata (falls back to manual input if unavailable) |
| **Numerical Aperture (NA)** | `number` |  | 0.75 | 0.1 - 1.7 | Numerical aperture of the objective |
| **Refractive Index (ni)** | `number` |  | 1.0 | 1.0 - 1.6 | 1.0 for air, 1.515 for oil immersion |
| **Pixel Size XY (nm)** | `number` |  | 325 | 1 - 10000 | Lateral pixel size in nanometers |
| **Z Step (nm)** | `number` |  | 5000 | 1 - 50000 | Axial step size in nanometers |
| **Emission Wavelength (nm)** | `text` |  | -- | -- | One wavelength per channel in order. Use single value for all channels or comma-separated for each. |
| **Iterations** | `number` |  | 50 | 1 - 200 | Number of Richardson-Lucy iterations (higher = sharper but slower, 20-100 typical) |
| **Use GPU** | `checkbox` |  | True | -- | Use GPU acceleration via OpenCL (requires compatible GPU on server) |
| **Tile Size (pixels)** | `number` |  | 1024 | 256 - 8192 | Maximum tile size for processing large images. Images larger than this will be processed in tiles. |
| **Tile Overlap (pixels)** | `number` |  | 100 | 0 - 500 | Overlap between tiles to reduce edge artifacts when tiling is used. |

## Files

| File | Description |
|------|-------------|
| `entrypoint.py` | Main worker logic -- `interface()` defines the UI, `compute()` runs the analysis |
| `Dockerfile` | Docker build configuration (x86_64 / production) |
| `Dockerfile_M1` | ARM64 / Apple Silicon Docker configuration |
| `environment.yml` | Conda environment dependencies |
| `tests/` | pytest test suite with `Dockerfile_Test` |

## Building

```bash
./build_workers.sh deconwolf
```

## Testing

```bash
./build_workers.sh --build-and-run-tests deconwolf
```

---
_This file is auto-generated by `generate_worker_docs.py`. To update, edit `entrypoint.py` and re-run the generator, or open a PR -- the Claude Code hook regenerates docs automatically._
