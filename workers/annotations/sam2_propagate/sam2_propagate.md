# SAM2 propagator

**Type:** Annotation Worker  
**Annotation Shape:** `polygon`  
**Interface Category:** SAM2  
**GPU Support:** Yes (NVIDIA CUDA)  

## Description

This tool uses the SAM2 model to take an existing annotation and propagate it through time or z-slices.It uses the existing annotation as a mask to segment the object in the next frame.It is useful for e.g. time-lapse microscopy in cases where the objects change in character over time.

## Interface Parameters

| Parameter | Type | Required | Default | Range / Options | Description |
|-----------|------|:--------:|---------|-----------------|-------------|
| **Batch XY** | `text` |  | -- | -- | Enter the XY positions you want to process |
| **Batch Z** | `text` |  | -- | -- | Enter the Z positions you want to process/propagate through |
| **Batch Time** | `text` |  | -- | -- | Enter the Time positions you want to process/propagate through |
| **Tag of objects to propagate** | `tags` |  | -- | -- |  |
| **Propagate across** | `select` |  | Time | Time, Z |  |
| **Propagation direction** | `select` |  | Forward | Forward, Backward |  |
| **Model** *(runtime)* | `select` |  | -- | _runtime_ | The SAM2 model to use for propagation. The large model may give slightly better results, but is slower and uses more memory, an... |
| **Resegment propagation objects** | `checkbox` |  | True | -- | If checked, the tool will run the SAM2 model on the current image and create new annotations for the propagated objects. This m... |
| **Connect sequentially** | `checkbox` |  | True | -- |  |
| **Padding** | `number` |  | 0 | -20 - 20 Pixels | Padding will expand (or, if negative, subtract) from the polygon. |
| **Smoothing** | `number` |  | 0.7 | 0 - 3 | Smoothing is used to simplify the polygons; a value of 0.7 is a good default. |

> **(runtime)** = option list is fetched at runtime (e.g. available trained models).

## Files

| File | Description |
|------|-------------|
| `entrypoint.py` | Main worker logic -- `interface()` defines the UI, `compute()` runs the analysis |
| `Dockerfile` | Docker build configuration (x86_64 / production) |
| `Dockerfile_M1` | ARM64 / Apple Silicon Docker configuration |
| `environment.yml` | Conda environment dependencies |

## Building

```bash
./build_workers.sh sam2_propagate
```

---
_This file is auto-generated by `generate_worker_docs.py`. To update, edit `entrypoint.py` and re-run the generator, or open a PR -- the Claude Code hook regenerates docs automatically._
