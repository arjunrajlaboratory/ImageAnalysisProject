# Cellpose-SAM

**Type:** Annotation Worker  
**Annotation Shape:** `polygon`  
**Interface Category:** Cellpose  
**GPU Support:** Yes (NVIDIA CUDA)  

## Description

This tool runs the Cellpose-SAM model to segment the image into cells. Learn more

## Interface Parameters

| Parameter | Type | Required | Default | Range / Options | Description |
|-----------|------|:--------:|---------|-----------------|-------------|
| **Batch XY** | `text` |  | -- | -- | Enter the XY positions you want to iterate over |
| **Batch Z** | `text` |  | -- | -- | Enter the Z slices you want to iterate over |
| **Batch Time** | `text` |  | -- | -- | Enter the Time points you want to iterate over |
| **Model** *(runtime)* | `select` |  | cellpose-sam | _runtime_ | cellpose-sam is the base model |
| **Channel for Slot 1** | `channelCheckboxes` |  | -- | -- | Select source channel(s) for the model's first input slot. If multiple are selected, only the first will be used. This slot is ... |
| **Channel for Slot 2** | `channelCheckboxes` |  | -- | -- | Select source channel(s) for the model's second input slot. If multiple are selected, only the first will be used. (Optional) |
| **Channel for Slot 3** | `channelCheckboxes` |  | -- | -- | Select source channel(s) for the model's third input slot. If multiple are selected, only the first will be used. (Optional) |
| **Diameter** | `number` |  | 10 | 0 - 200 pixels | The diameter of the cells in the image. Choose as close as you can because the model is most accurate when the diameter is clos... |
| **Smoothing** | `number` |  | 0.7 | 0 - 10 | Smoothing is used to simplify the polygons. A value of 0.7 is a good default. |
| **Padding** | `number` |  | 0 | -20 - 20 pixels | Padding will expand (or, if negative, subtract) from the polygon. A value of 0 means no padding. |
| **Tile Size** | `number` |  | 1024 | 0 - 2048 pixels | The worker will split the image into tiles of this size. If they are too large, the Cellpose model may not be able to run on them. |
| **Tile Overlap** | `number` |  | 0.1 | 0 - 1 Fraction | The amount of overlap between tiles. A value of 0.1 means that the tiles will overlap by 10%, which is 102 pixels if the tile s... |

> **(runtime)** = option list is fetched at runtime (e.g. available trained models).

## Files

| File | Description |
|------|-------------|
| `entrypoint.py` | Main worker logic -- `interface()` defines the UI, `compute()` runs the analysis |
| `Dockerfile` | Docker build configuration (x86_64 / production) |
| `environment.yml` | Conda environment dependencies |

## Building

```bash
./build_workers.sh cellposesam
```

---
_This file is auto-generated by `generate_worker_docs.py`. To update, edit `entrypoint.py` and re-run the generator, or open a PR -- the Claude Code hook regenerates docs automatically._
