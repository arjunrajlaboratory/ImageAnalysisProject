# SAM few-shot segmentation

**Type:** Annotation Worker  
**Annotation Shape:** `polygon`  
**Interface Category:** SAM  
**GPU Support:** Yes (NVIDIA CUDA)  

## Description

Uses SAM1 ViT-H features for few-shot segmentation based on training annotations

## Interface Parameters

| Parameter | Type | Required | Default | Range / Options | Description |
|-----------|------|:--------:|---------|-----------------|-------------|
| **Training Tag** | `tags` |  | -- | -- |  |
| **Batch XY** | `text` |  | -- | -- |  |
| **Batch Z** | `text` |  | -- | -- |  |
| **Batch Time** | `text` |  | -- | -- |  |
| **Model** *(runtime)* | `select` |  | sam_vit_h_4b8939 | _runtime_ |  |
| **Similarity Threshold** | `number` |  | 0.5 | 0.0 - 1.0 |  |
| **Target Occupancy** | `number` |  | 0.2 | 0.05 - 0.8 |  |
| **Points per side** | `number` |  | 128 | 16 - 128 |  |
| **Min Mask Area** | `number` |  | 30 | 0 - 100000 |  |
| **Max Mask Area** | `number` |  | 1000 | 0 - 100000 |  |
| **Smoothing** | `number` |  | 0.3 | 0 - 3 |  |

> **(runtime)** = option list is fetched at runtime (e.g. available trained models).

## Files

| File | Description |
|------|-------------|
| `entrypoint.py` | Main worker logic -- `interface()` defines the UI, `compute()` runs the analysis |
| `Dockerfile` | Docker build configuration (x86_64 / production) |
| `Dockerfile_M1` | ARM64 / Apple Silicon Docker configuration |
| `environment.yml` | Conda environment dependencies |
| `tests/` | pytest test suite with `Dockerfile_Test` |

## Building

```bash
./build_workers.sh sam_fewshot_segmentation
```

## Testing

```bash
./build_workers.sh --build-and-run-tests sam_fewshot_segmentation
```

---
_This file is auto-generated by `generate_worker_docs.py`. To update, edit `entrypoint.py` and re-run the generator, or open a PR -- the Claude Code hook regenerates docs automatically._
